<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì‹ ì˜ ì† - ì‚¬ë ¹ë¶€ í†µí•©ë³¸</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background-color: #0c0c0c; color: #f2c94c; font-family: 'Malgun Gothic', sans-serif; text-align: center; padding: 20px; margin: 0; }
        h1 { color: #f2c94c; font-size: 2.5rem; margin-top: 30px; font-weight: bold; cursor: pointer; }
        .target-box { color: #FFF; font-size: 1.1rem; margin-bottom: 20px; background: #1a1a1a; padding: 8px 15px; border-radius: 10px; display: inline-block; border: 2px solid #f2c94c; }
        .btn-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; max-width: 400px; margin: 0 auto 15px auto; }
        button { border: none; border-radius: 8px; cursor: pointer; font-size: 17px; font-weight: bold; }
        .btn-main { width: 100%; height: 55px; background-color: #d4a017; color: black; margin-bottom: 5px; }
        .btn-sub { width: 48.5%; height: 50px; background-color: #262626; color: white; border: 1px solid #333; }
        .btn-menu { width: 100%; height: 50px; background-color: #1a1a1a; color: #f2c94c; border: 2px dashed #f2c94c; margin-top: 10px; }
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; overflow-y: auto; padding: 20px; }
        .modal-content { background: #1a1a1a; width: 95%; max-width: 380px; margin: 0 auto; padding: 20px; border: 2px solid #f2c94c; border-radius: 15px; }
        #console { width: 100%; height: 250px; padding: 15px; background: #1a1a1a; color: #f2c94c; border: 2px solid #333; border-radius: 12px; margin: 15px auto; text-align: left; overflow-y: auto; white-space: pre-wrap; box-sizing: border-box; }
        .admin-input { width: 100%; height: 40px; margin-top: 10px; background: #000; color: #fff; border: 1px solid #f2c94c; text-align: center; }
    </style>
</head>
<body>
    <h1 onclick="location.reload()">ì‹ ì˜ ì†</h1>
    <div class="target-box" id="current-strategy">ğŸ¯ ì „ëµ ëŒ€ê¸° ì¤‘...</div>
    
    <div class="btn-container">
        <button class="btn-main" onclick="process('5')">5ì¡°í•© ìƒì„± (AC 9-10)</button>
        <button class="btn-main" onclick="process('10')">10ì¡°í•© ìƒì„± (íŒ¨í„´ ë¶„ì„)</button>
        <button class="btn-sub" onclick="showModal('storage')">ë³´ê´€í•¨</button>
        <button class="btn-sub" onclick="clearAll()">ì´ˆê¸°í™”</button>
        <button class="btn-menu" onclick="showModal('menu')">ğŸ“‹ ì „ëµ ë©”ë‰´íŒ (ì‚¬ë ¹ë¶€)</button>
    </div>

    <div id="console">â–¶ ì‚¬ì¥ë‹˜, ì¤‘ì•™ ì„œë²„ ì—°ê²° ì™„ë£Œ.</div>

    <div id="modal"><div class="modal-content" id="modal-inner"></div></div>

    <script>
        // [1] ì„œë²„ ë° ë³´ì•ˆ ì„¤ì •
        const firebaseConfig = { databaseURL: "https://lotto-euljiro-default-rtdb.firebaseio.com/" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        
        // ì‚¬ë ¹ë¶€ ì‹¤ì‹œê°„ ë°ì´í„° (18ìˆ˜ ë° íƒ€ê²Ÿ íšŒì°¨) [cite: 2026-01-11]
        let cmd18Numbers = []; 
        let currentRound = "1206íšŒ";

        db.ref('hq_strategy').on('value', (snap) => {
            const data = snap.val();
            if(data) {
                cmd18Numbers = data.nums;
                currentRound = data.round;
                document.getElementById('current-strategy').innerText = `ğŸ¯ ${currentRound} [${cmd18Numbers.length}ìˆ˜] ì „ëµ ê°€ë™`;
                console.log("ì‚¬ë ¹ë¶€ ì§€ì‹œ ìˆ˜ì‹ :", cmd18Numbers);
            }
        });

        // [2] í•µì‹¬ ì—”ì§„ (ì‚¬ì¥ë‹˜ 5ì¡° ì•ë¶€ë¶„ ë¡œì§) [cite: 2026-01-11, 2026-01-18]
        function getAC(arr) {
            let d = new Set();
            for(let i=0; i<6; i++) for(let j=i+1; j<6; j++) d.add(Math.abs(arr[i]-arr[j]));
            return d.size - 5;
        }

        function process(mode) {
            if(cmd18Numbers.length < 6) { alert("ì‚¬ë ¹ë¶€ì˜ 18ìˆ˜ í•˜ë‹¬ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”."); return; }
            var box = document.getElementById('console');
            box.innerHTML = `â–¶ [${mode}ì¡°í•©] ì „ëµ ìƒì„± ì¤‘...\n`;
            
            var gen = 0, safety = 0;
            while(gen < (mode=='5'?5:10) && safety < 10000) {
                safety++;
                var res = [];
                // ì‚¬ë ¹ë¶€ê°€ í•˜ë‹¬í•œ 18ìˆ˜ ë‚´ì—ì„œë§Œ ë¬´ì‘ìœ„ ì¶”ì¶œ! [cite: 2026-01-18]
                while(res.length < 6) {
                    var n = cmd18Numbers[Math.floor(Math.random() * cmd18Numbers.length)];
                    if(!res.includes(n)) res.push(n);
                }
                res.sort((a,b)=>a-b);
                
                if(mode=='5' && (getAC(res) < 9 || getAC(res) > 10)) continue;

                gen++;
                box.innerHTML += `(${gen}) ${res.map(n=>n<10?'0'+n:n).join('  ')}\n`;
            }
            box.scrollTop = box.scrollHeight;
        }

        // [3] ê´€ë¦¬ì ë¹„ë°€ í†µì œì°½ [cite: 2026-01-18]
        function showModal(type) {
            var inner = document.getElementById('modal-inner');
            if(type == 'menu') {
                inner.innerHTML = `
                    <h2 style="color:#f2c94c">ğŸ“‹ ì „ëµ ë©”ë‰´íŒ</h2>
                    <button class="btn-main" style="height:45px; margin-bottom:10px;" onclick="alert('ì¤€ë¹„ì¤‘')">ğŸ“© ì„ì§€ë¡œ ìª½ì§€í•¨</button>
                    <div style="border:1px solid #333; padding:10px; border-radius:10px;">
                        <p style="color:#888; font-size:12px;">ì‚¬ë ¹ë¶€ ì „ìš© (ë¹„ë°€ë²ˆí˜¸ ì…ë ¥)</p>
                        <input type="password" id="admin-pw" class="admin-input" placeholder="Password">
                        <button onclick="checkAdmin()" style="width:100%; margin-top:5px; height:35px; background:#444; color:#fff; border:none;">ë³¸ë¶€ ì ‘ì†</button>
                    </div>
                `;
            } else if(type == 'admin_panel') {
                inner.innerHTML = `
                    <h2 style="color:#f2c94c">ğŸ•¹ï¸ ì „ëµ ì‚¬ë ¹ë¶€</h2>
                    <p style="color:#fff; font-size:13px;">ì½¤ë§ˆ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ 18ìˆ˜ ì´ìƒ ì…ë ¥</p>
                    <textarea id="new-18" style="width:100%; height:80px; background:#000; color:#0f0; border:1px solid #0f0;">${cmd18Numbers.join(',')}</textarea>
                    <button onclick="sendStrategy()" style="width:100%; height:50px; background:#0f0; color:#000; font-weight:bold; margin-top:10px;">ğŸš€ ì „ëµ ì „ì†¡ (ì „ì²´ ë°°í¬)</button>
                `;
            }
            inner.innerHTML += '<button class="btn-sub" style="width:100%; margin-top:15px;" onclick="hideModal()">ë‹«ê¸°</button>';
            document.getElementById('modal').style.display = 'block';
        }

        function checkAdmin() {
            if(document.getElementById('admin-pw').value === "1234") { // ì‚¬ì¥ë‹˜ ë¹„ë°€ë²ˆí˜¸ [cite: 2026-01-18]
                showModal('admin_panel');
            } else { alert("ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."); }
        }

        function sendStrategy() {
            const raw = document.getElementById('new-18').value;
            const nums = raw.split(',').map(n => parseInt(n.trim())).filter(n => !isNaN(n));
            if(nums.length < 10) { alert("ìµœì†Œ 10ê°œ ì´ìƒ ì…ë ¥í•˜ì„¸ìš”."); return; } // [cite: 2026-01-12]
            db.ref('hq_strategy').set({
                nums: nums,
                round: "1206íšŒ",
                timestamp: Date.now()
            }).then(() => { alert("ì „ëµì´ ëª¨ë“  ì—°í•©êµ°ì—ê²Œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!"); hideModal(); });
        }

        function hideModal() { document.getElementById('modal').style.display = 'none'; }
        function clearAll() { if(confirm("ì´ˆê¸°í™”í• ê¹Œìš”?")) { location.reload(); } }
    </script>
</body>
</html>
