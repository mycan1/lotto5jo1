<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì‹ ì˜ ì† - LUXURY EDITION</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background-color: #000; color: #d4a017; font-family: 'Malgun Gothic', sans-serif; text-align: center; padding: 20px; margin: 0; }
        h1 { color: #d4a017; font-size: 2.8rem; margin-top: 20px; font-weight: 900; text-shadow: 2px 2px 10px rgba(212, 160, 23, 0.5); letter-spacing: -2px; }
        
        .target-box { color: #fff; font-size: 1.1rem; margin-bottom: 25px; background: linear-gradient(145deg, #1a1a1a, #000); padding: 12px 25px; border-radius: 50px; display: inline-block; border: 1px solid #d4a017; box-shadow: 0 0 15px rgba(212, 160, 23, 0.2); }
        
        .btn-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; max-width: 420px; margin: 0 auto 20px auto; }
        button { border: none; border-radius: 12px; cursor: pointer; font-weight: bold; transition: all 0.3s; }
        
        .btn-main { width: 100%; height: 65px; background: linear-gradient(180deg, #f2c94c, #d4a017); color: #000; font-size: 20px; margin-bottom: 5px; box-shadow: 0 5px 15px rgba(212, 160, 23, 0.3); }
        .btn-main:active { transform: scale(0.98); box-shadow: none; }
        
        .btn-sub { width: 48%; height: 55px; background-color: #1a1a1a; color: #fff; border: 1px solid #333; font-size: 16px; }
        .btn-menu { width: 100%; height: 50px; background-color: #000; color: #d4a017; border: 2px dashed #d4a017; margin-top: 15px; font-size: 16px; }

        #console { width: 100%; height: 280px; padding: 20px; background: #0a0a0a; color: #f2c94c; border: 2px solid #1a1a1a; border-radius: 20px; margin: 20px auto; text-align: left; overflow-y: auto; white-space: pre-wrap; box-sizing: border-box; font-size: 22px; font-weight: bold; line-height: 1.8; border-top: 4px solid #d4a017; }
        
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; padding-top: 60px; }
        .modal-content { background: #111; width: 85%; max-width: 380px; margin: 0 auto; padding: 30px; border: 1px solid #d4a017; border-radius: 25px; box-shadow: 0 0 30px rgba(212, 160, 23, 0.2); }
        
        .admin-input { width: 100%; height: 55px; margin: 20px 0; background: #000; color: #fff; border: 1px solid #d4a017; text-align: center; font-size: 26px; border-radius: 10px; }
        textarea { width: 100%; height: 120px; background: #000; color: #00ff00; border: 1px solid #333; padding: 15px; box-sizing: border-box; font-size: 18px; border-radius: 10px; margin-bottom: 15px; }
    </style>
</head>
<body>
    <h1 onclick="location.reload()">ì‹ ì˜ ì†</h1>
    <div class="target-box" id="current-strategy">ğŸ¯ ì‚¬ë ¹ë¶€ ì „ëµ ëŒ€ê¸° ì¤‘...</div>
    
    <div class="btn-container">
        <button class="btn-main" onclick="process('5')">ğŸ’ 5ì¡°í•© ìƒì„± (AC 9-10)</button>
        <button class="btn-main" onclick="process('10')">ğŸ–ï¸ 10ì¡°í•© ìƒì„± (íŒ¨í„´ì••ì¶•)</button>
        <button class="btn-sub" onclick="showModal('storage')">ğŸ“‚ ë³´ê´€í•¨</button>
        <button class="btn-sub" onclick="clearAll()">ğŸ”„ ì´ˆê¸°í™”</button>
        <button class="btn-menu" onclick="showModal('menu')">ğŸ™ï¸ ê´€ë¦¬ì ì „ëµ ì‚¬ë ¹ë¶€</button>
    </div>

    <div id="console">â–¶ ì‚¬ì¥ë‹˜, ì¤€ë¹„ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</div>
    <div id="modal"><div class="modal-content" id="modal-inner"></div></div>

    <script>
        const firebaseConfig = { databaseURL: "https://lotto-euljiro-default-rtdb.firebaseio.com/" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        
        let cmd18Numbers = [1,4,9,11,16,18,23,25,27,31,33,35,38,40,41,42,44,45]; 
        let currentRound = "1206íšŒ";
        let lastWinNums = [1, 4, 16, 23, 31, 41]; // ì§€ë‚œì£¼ ë²ˆí˜¸ (ì´ì›”ìˆ˜ ì²´í¬ìš©)

        db.ref('hq_strategy').on('value', (snap) => {
            const data = snap.val();
            if(data && data.nums) {
                cmd18Numbers = data.nums;
                document.getElementById('current-strategy').innerText = `ğŸ¯ ${currentRound} [${cmd18Numbers.length}ìˆ˜] ì „ëµ ê°€ë™`;
            }
        });

        function getAC(arr) {
            let d = new Set();
            for(let i=0; i<6; i++) for(let j=i+1; j<6; j++) d.add(Math.abs(arr[i]-arr[j]));
            return d.size - 5;
        }

        function process(mode) {
            var box = document.getElementById('console');
            box.innerHTML = `â–¶ ìƒì„± ì¤‘...\n\n`;
            var gen = 0, safety = 0;
            while(gen < (mode=='5'?5:10) && safety < 10000) {
                safety++;
                var res = [];
                while(res.length < 6) {
                    var n = cmd18Numbers[Math.floor(Math.random() * cmd18Numbers.length)];
                    if(!res.includes(n)) res.push(n);
                }
                res.sort((a,b)=>a-b);
                
                // 1. AC ì§€ìˆ˜ í•„í„° [cite: 2026-01-11]
                if(mode=='5' && (getAC(res) < 9 || getAC(res) > 10)) continue;
                // 2. ì´ì›”ìˆ˜ í•„í„° (0~2ê°œ) [cite: 2026-01-18]
                let carryCount = res.filter(x => lastWinNums.includes(x)).length;
                if(carryCount > 2) continue;

                gen++;
                box.innerHTML += `(${gen})  ${res.map(n=>n<10?'0'+n:n).join('   ')}\n`;
            }
            box.scrollTop = box.scrollHeight;
        }

        function showModal(type) {
            var inner = document.getElementById('modal-inner');
            if(type == 'menu') {
                inner.innerHTML = `<h2 style="color:#d4a017">ğŸ” ì‚¬ë ¹ë¶€ ì ‘ì†</h2><input type="password" id="admin-pw" class="admin-input" placeholder="PASS"><button onclick="checkAdmin()" style="width:100%; height:55px; background:#d4a017; color:#000; border:none; font-weight:bold; border-radius:10px;">ë³¸ë¶€ ì…ì¥</button>`;
            } else if(type == 'admin_panel') {
                inner.innerHTML = `<h2 style="color:#d4a017">ğŸ•¹ï¸ ì „ëµ ë°°í¬</h2><textarea id="new-18">${cmd18Numbers.join(',')}</textarea><button onclick="sendStrategy()" style="width:100%; height:60px; background:#00ff00; color:#000; font-weight:bold; border:none; border-radius:10px;">ğŸš€ ì¦‰ì‹œ ì „ì†¡ ë° ë°°í¬</button>`;
            }
            inner.innerHTML += '<button class="btn-sub" style="width:100%; margin-top:20px;" onclick="hideModal()">ë‹«ê¸°</button>';
            document.getElementById('modal').style.display = 'block';
        }

        function checkAdmin() { if(document.getElementById('admin-pw').value === "1234") showModal('admin_panel'); else alert("ì ‘ê·¼ ê¸ˆì§€"); }
        function sendStrategy() {
            const nums = document.getElementById('new-18').value.split(',').map(n => parseInt(n.trim())).filter(n => !isNaN(n));
            db.ref('hq_strategy').set({ nums: nums, round: "1206íšŒ" }).then(() => { alert("ì „ëµì´ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤!"); hideModal(); });
        }
        function hideModal() { document.getElementById('modal').style.display = 'none'; }
        function clearAll() { if(confirm("ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) location.reload(); }
    </script>
</body>
</html>
